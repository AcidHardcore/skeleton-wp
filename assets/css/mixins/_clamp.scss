@use "sass:math";
@use "sass:list";
@use "strip-unit" as *;
@use "../variables" as *;

@function clamp-slope($min-vw, $max-vw, $min-font-size, $max-font-size) {
  // Convert all values to unitless numbers for calculation
  $min-vw-unitless: strip-unit($min-vw);
  $max-vw-unitless: strip-unit($max-vw);
  $min-font-size-unitless: strip-unit($min-font-size);
  $max-font-size-unitless: strip-unit($max-font-size);

  // Calculate slope using proper division
  $slope: math.div(
      $max-font-size-unitless - $min-font-size-unitless,
      $max-vw-unitless - $min-vw-unitless
  );

  // Calculate y-axis intersection
  $yAxisIntersection: (-1 * $min-vw-unitless * $slope) + $min-font-size-unitless;

  // Return clamp function with proper units
  @return clamp(#{$min-font-size}, #{$yAxisIntersection}rem + #{$slope * 100}vw, #{$max-font-size});
}
