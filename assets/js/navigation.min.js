const KEYMAP={TAB:9};function init(){initAllNavs(".main-nav--toggle-sub",initEachNavToggleSubmenu),initAllNavs(".main-nav--toggle-small",initEachNavToggleSmall)}function initAllNavs(e,t){document.querySelectorAll(e).forEach((e=>t(e)))}function initEachNavToggleSubmenu(e){const t=e.querySelectorAll(".menu ul");t.length&&(e.addEventListener("focusout",(t=>{e.contains(t.relatedTarget)||e.querySelectorAll(".menu-item--toggled-on").forEach((e=>{closeSubMenu(e)}))})),t.forEach(((t,n)=>{const o=t.parentNode,a=o.querySelector(".dropdown-toggle"),l=o.querySelector("a");t.id||(t.id=`submenu-${e.className.split(" ")[0]}-${n}`),a.setAttribute("aria-controls",t.id),a.addEventListener("click",(()=>{toggleSubMenu(o)})),l.addEventListener("focus",(()=>{o.parentNode.querySelectorAll(".menu-item--toggled-on").forEach((e=>{e!==o&&closeSubMenu(e)}))})),t.addEventListener("keydown",(e=>{if(KEYMAP.TAB!==e.keyCode)return;const n=t.querySelectorAll("a, button"),a=n[0],l=n[n.length-1];e.shiftKey&&document.activeElement===a&&closeSubMenu(o),e.shiftKey||document.activeElement!==l||closeSubMenu(o)})),o.classList.add("menu-item--has-toggle")})))}function initEachNavToggleSmall(e){const t=e.querySelector(".main-nav__toggle"),n=document.querySelector(".site-header"),o=e.querySelectorAll(".main-nav--toggle-small li"),a=e.querySelector(".menu"),l=window.matchMedia("(max-width: 992px)");if(!t)return;if("undefined"==typeof gsap)return console.warn("GSAP not found. Animations will be disabled."),t.setAttribute("aria-expanded","false"),void t.addEventListener("click",(e=>{s(e.currentTarget)}),!1);let i;function s(s=t){const c=!e.classList.contains("main-nav--toggled-on");e.classList.toggle("main-nav--toggled-on"),n.classList.toggle("site-header--menu-open"),s.classList.toggle("burger--close"),s.setAttribute("aria-expanded",c),l.matches&&(i||(gsap.set(a,{height:0,opacity:0,display:"none"}),gsap.set(o,{opacity:.5,x:-20,rotationY:-90,transformOrigin:"0% 50%"}),i=gsap.timeline({paused:!0}).to(a,{height:"auto",opacity:1,display:"block",duration:.3,ease:"power2.inOut"}).to(o,{opacity:1,x:0,rotationY:0,duration:.5,ease:"power3.out",stagger:.08},"<0.2"),i.reverse(0)),c?(i.play(),document.addEventListener("click",r)):gsap.delayedCall(.1,(()=>{i.reverse(),document.removeEventListener("click",r)})))}function r(n){e.classList.contains("main-nav--toggled-on")&&!e.contains(n.target)&&n.target!==t&&s()}t.setAttribute("aria-expanded","false"),t.addEventListener("click",(e=>s(e.currentTarget)),!1),document.addEventListener("keydown",(t=>{"Escape"===t.key&&e.classList.contains("main-nav--toggled-on")&&s()}))}function openSubMenu(e){e.parentNode.querySelectorAll(".menu-item--toggled-on").forEach((t=>{t!==e&&closeSubMenu(t)}));const t=e.querySelector(".dropdown-toggle"),n=e.querySelector("ul");e.classList.add("menu-item--toggled-on"),n.classList.add("toggle-show"),t.setAttribute("aria-expanded","true"),t.setAttribute("aria-label",skeletonWpScreenReaderText.collapse)}function closeSubMenu(e){const t=e.querySelector(".dropdown-toggle"),n=e.querySelector("ul");e.classList.remove("menu-item--toggled-on"),n.classList.remove("toggle-show"),t.setAttribute("aria-expanded","false"),t.setAttribute("aria-label",skeletonWpScreenReaderText.expand),e.querySelectorAll(".menu-item--toggled-on").forEach((e=>closeSubMenu(e)))}function toggleSubMenu(e){e.classList.contains("menu-item--toggled-on")?closeSubMenu(e):openSubMenu(e)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",init):init();