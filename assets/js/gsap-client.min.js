class GsapEffects{constructor(){gsap.effects||(gsap.effects={}),this.animationPresets={baseConfig:{duration:.5,stagger:0,ease:"power2.out"},effects:[{id:"fadeSlideTo",type:"to",props:{opacity:.5,x:300,yoyo:!0,repeat:-1}},{id:"fadeSlideFrom",type:"from",props:{opacity:.25,x:300,yoyo:!0,repeat:-1}},{id:"fadeSlideFromTo",type:"fromTo",fromProps:{opacity:.1,x:300},toProps:{opacity:1,x:600,yoyo:!0,repeat:-1}},{id:"fadeIn",type:"fromTo",fromProps:{opacity:0},toProps:{opacity:1}},{id:"fadeUp",type:"fromTo",fromProps:{opacity:0,y:50},toProps:{opacity:1,y:0}},{id:"fadeLeft",type:"fromTo",fromProps:{opacity:0,x:-50},toProps:{opacity:1,x:0}},{id:"fadeRight",type:"fromTo",fromProps:{opacity:0,x:50},toProps:{opacity:1,x:0}},{id:"splitText",type:"custom",config:{charDuration:.5,charStagger:.05,yOffset:20}}]},this.registerEffects()}registerEffects(){this.animationPresets.effects.forEach((t=>{gsap.effects[t.id]=(e,r)=>{if("splitText"===t.id)return this.handleSplitTextAnimation(e,r,t);const o={...this.animationPresets.baseConfig,...r};switch(t.type){case"from":return gsap.from(e,{...t.props,...o});case"to":return gsap.to(e,{...t.props,...o});case"fromTo":return gsap.fromTo(e,{...t.fromProps,...o},{...t.toProps,...o});default:return console.warn(`Unknown animation type: ${t.type}`),gsap.to(e,{...o})}}}))}handleSplitTextAnimation(t,e,r){const o=this.getValidElement(t);if(!o)return console.error("SplitText: Invalid target element"),gsap.timeline();try{const t=new SplitText(o,{type:"chars"}),a=gsap.timeline(),s=e.duration||r.config.charDuration,i=e.stagger||r.config.charStagger;return a.from(t.chars,{opacity:0,y:r.config.yOffset,duration:s,ease:e.ease||this.animationPresets.baseConfig.ease,stagger:i}),e.revertOnComplete&&a.eventCallback("onComplete",(()=>t.revert())),a}catch(t){return console.error("SplitText animation failed:",t),gsap.timeline()}}getValidElement(t){return t instanceof Element?t:t?.[0]instanceof Element?t[0]:null}}class ScrollTriggerAnimator{constructor(){this.DEFAULT_SCROLL_START="top 80%",this.DEFAULT_SCROLL_END="bottom 20%",this.DEFAULT_TOGGLE_ACTIONS="play none none none",this.GLOBAL_OVERLAP="-=0.5"}init(){document.querySelectorAll("[data-scroll-section]").forEach((t=>this.processSection(t)))}processSection(t){const e=t.getAttribute("data-scroll-start")||this.DEFAULT_SCROLL_START,r=t.getAttribute("data-scroll-end")||this.DEFAULT_SCROLL_END,o=t.getAttribute("data-scroll-toggle")||this.DEFAULT_TOGGLE_ACTIONS,a=gsap.timeline({scrollTrigger:{trigger:t,start:e,end:r,toggleActions:o,markers:!1}}),s=t.querySelectorAll("[data-scroll-item], [data-scroll-stagger-group]");this.sortItemsByOrder(Array.from(s)).forEach(((t,e)=>this.processItem(t,e,a)))}sortItemsByOrder(t){return t.sort(((t,e)=>parseInt(t.getAttribute("data-scroll-order")||"0")-parseInt(e.getAttribute("data-scroll-order")||"0")))}processItem(t,e,r){const o=t.hasAttribute("data-scroll-stagger-group");"true"===t.getAttribute("data-scroll-independent")?this.createIndependentAnimation(t):this.addToTimeline(t,e,r,o)}createIndependentAnimation(t){const e=t.getAttribute("data-scroll-animation")||"fadeUp",r=parseFloat(t.getAttribute("data-scroll-duration"))||.5,o=parseFloat(t.getAttribute("data-scroll-stagger"))||.1,a=parseFloat(t.getAttribute("data-scroll-delay"))||0,s=t.getAttribute("data-scroll-start")||this.DEFAULT_SCROLL_START,i=t.getAttribute("data-scroll-end")||this.DEFAULT_SCROLL_END,n=t.getAttribute("data-scroll-toggle")||this.DEFAULT_TOGGLE_ACTIONS;if(!gsap.effects[e])return void console.warn(`Animation effect "${e}" not found`);const l=gsap.timeline({scrollTrigger:{trigger:t,start:s,end:i,toggleActions:n}}),c=gsap.effects[e](t,{duration:r,stagger:o});l.add(c,a||0)}addToTimeline(t,e,r,o){const a=t.getAttribute("data-scroll-animation")||"fadeUp",s=parseFloat(t.getAttribute("data-scroll-duration"))||.5,i=parseFloat(t.getAttribute("data-scroll-stagger"))||.1,n=parseFloat(t.getAttribute("data-scroll-delay"))||0,l=t.getAttribute("data-scroll-position");if(!gsap.effects[a])return void console.warn(`Animation effect "${a}" not found`);const c=null!==l?l:0===e?0:this.GLOBAL_OVERLAP;let g;g=o?this.createStaggerGroupAnimation(t,a,s,i):gsap.effects[a](t,{duration:s,stagger:i}),r.add(g,n?`+=${n}`:c)}createStaggerGroupAnimation(t,e,r,o){const a=Array.from(t.children),s=gsap.timeline();return s.add(gsap.effects[e](a,{duration:r,stagger:o})),a.forEach((t=>{if(t.hasAttribute("data-scroll-stagger-children")){const a=Array.from(t.children);s.add(gsap.effects[e](a,{duration:r,stagger:o}),0)}})),s}}document.addEventListener("DOMContentLoaded",(()=>{gsap.registerPlugin(ScrollTrigger,SplitText),new GsapEffects,(new ScrollTriggerAnimator).init()}));